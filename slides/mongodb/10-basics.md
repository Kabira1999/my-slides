
# Document Data Model

``` javascript
var book = {
  title: 'MongoDB: The Definitive Guide',
  authors: [
    { lastName: 'Chodorow', firstName: 'Kristina' },
    { lastName: 'Dirolf', firstName: 'Michael' }
  ],
  tags: ['NoSQL', 'Database', 'BigData', 'Programming'],
  pages: 195,
  published: 2010
};
```



# Insert

``` javascript
db.books.save(book);

// primary key '_id'
// generated by client driver
// e.g. 4fba97070f318c1e73763350

book._id;
```



# Simple Queries 1

``` javascript
db.books.find(); // find all

// get count of all docs
db.books.count();
db.books.find().count();

// find by primary key (_id)
db.books.findOne({
    _id: ObjectId("4fba97190f318c1e73763353")
});
```



# Simple Queries 2

``` javascript
db.books.find({ title: 'JavaScript Patterns' });

db.books.find({ title: /^MongoDB/ });

db.books.find({ title: /^MongoDB/,   // and
                pages: {$gt: 200} });
```



# Query Deep Structures

``` javascript
db.books.find({
  'authors.lastName': 'Katz'});
db.books.find({
  'authors.lastName':
    {$in: ['Katz', 'McCaw']} });
db.books.find({
  $or: [
    {'authors.lastName': 'Katz'},
    {'authors.lastName': 'McCaw'}
  ]});
```



# Query Multivalued Fields

``` javascript
db.books.find({authors: {$size:2} });

db.books.find(
  { tags: 'Programming' });

db.books.find({
  tags: {$all: ['Programming',
                'JavaScript']}
  });
```

